<header>
  <nav class="navbar">
    <div class="logo">
      <a href="index.html" id="header-site-title">Mon Site</a>
    </div>
    
    <ul class="nav-links" id="dynamic-menu">
      <li>Chargement...</li>
    </ul>

    <div class="burger">
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
    </div>
  </nav>

  <script>
    // 1. Définir le menu par défaut (au cas où le client vide tout)
    const defaultMenu = `
      <li><a href="index.html">Accueil</a></li>
      <li><a href="publications.html">Publications</a></li>
      <li><a href="interventions.html">Interventions</a></li>
      <li><a href="cours.html">Cours</a></li>
    `;

    // 2. Charger la configuration
    fetch('data.json?t=' + Date.now())
      .then(r => r.json())
      .then(data => {
        // Titre du site (optionnel)
        if(data.profil && data.profil.titre) {
           // Tu peux décommenter la ligne dessous si tu veux afficher le nom du prof en haut à gauche
           // document.getElementById('header-site-title').innerText = data.profil.titre; 
        }

        // Génération du Menu
        const menuList = data.config && data.config.menu;
        const menuContainer = document.getElementById('dynamic-menu');

        if(menuList && menuList.length > 0) {
          let html = `<li><a href="index.html">Accueil</a></li>`; // On garde toujours l'Accueil en premier
          
          menuList.forEach(item => {
            // On sécurise : s'il n'y a pas d'URL, on met #
            const link = item.url || "#";
            const label = item.titre || "Lien";
            html += `<li><a href="${link}">${label}</a></li>`;
          });
          
          menuContainer.innerHTML = html;
        } else {
          // Si la config est vide, on met le menu par défaut
          menuContainer.innerHTML = defaultMenu;
        }
      })
      .catch(e => {
        console.log("Erreur menu ou pas encore de config");
        document.getElementById('dynamic-menu').innerHTML = defaultMenu;
      });

    // 3. Gestion du Burger Menu (Mobile)
    const burger = document.querySelector('.burger');
    const nav = document.querySelector('.nav-links');
    
    if(burger){
        burger.addEventListener('click', () => {
            nav.classList.toggle('nav-active');
            burger.classList.toggle('toggle');
        });
    }
  </script>
</header>
