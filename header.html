<script type="module">
  import { getSiteData } from './api.js';

  getSiteData().then(prof => {
    if (!prof) {
      console.log("Utilisation du menu par défaut (aucun prof trouvé)");
      return;
    }

    // 1. Mise à jour du Titre du site
    const siteTitle = document.getElementById('header-site-title');
    if (prof.site_title) siteTitle.innerText = prof.site_title;

    // 2. Gestion du Menu dynamique
    const menuList = prof.menu_config; // Champ JSONB dans Supabase
    const menuContainer = document.getElementById('dynamic-menu');

    if (menuList && menuList.length > 0) {
      let html = "";
      menuList.forEach(item => {
        html += `<li><a href="${item.url || '#'}">${item.titre || 'Lien'}</a></li>`;
      });
      menuContainer.innerHTML = html;
    }
  });

  // Logique du Burger Menu (inchangée)
  const burger = document.querySelector('.burger');
  const nav = document.querySelector('.nav-links');
  if(burger){
    burger.addEventListener('click', () => {
      nav.classList.toggle('nav-active');
      burger.classList.toggle('toggle');
    });
  }
</script>
